import{S as U,i as q,s as L,k as d,q as x,a as S,l as p,m,r as I,h as f,c as y,b as C,E as _,C as E,T,I as w,o as A,n as v,u as H}from"../../../../chunks/index-5fac9acd.js";import{e as M}from"../../../../chunks/events-socket-a1602771.js";function b(h,s,l){const o=h.slice();return o[2]=s[l],o}function k(h){let s,l,o=h[2]+"",r,n,c;return{c(){s=d("li"),l=d("a"),r=x(o),c=S(),this.h()},l(e){s=p(e,"LI",{class:!0});var t=m(s);l=p(t,"A",{href:!0});var i=m(l);r=I(i,o),i.forEach(f),c=y(t),t.forEach(f),this.h()},h(){v(l,"href",n=`/profile/${h[2]}`),v(s,"class","svelte-1hdwas8")},m(e,t){C(e,s,t),_(s,l),_(l,r),_(s,c)},p(e,t){t&1&&o!==(o=e[2]+"")&&H(r,o),t&1&&n!==(n=`/profile/${e[2]}`)&&v(l,"href",n)},d(e){e&&f(s)}}}function N(h){let s,l,o,r,n,c=h[0],e=[];for(let t=0;t<c.length;t+=1)e[t]=k(b(h,c,t));return{c(){s=d("section"),l=d("h3"),o=x("Users logged in"),r=S(),n=d("ul");for(let t=0;t<e.length;t+=1)e[t].c()},l(t){s=p(t,"SECTION",{});var i=m(s);l=p(i,"H3",{});var a=m(l);o=I(a,"Users logged in"),a.forEach(f),r=y(i),n=p(i,"UL",{});var u=m(n);for(let g=0;g<e.length;g+=1)e[g].l(u);u.forEach(f),i.forEach(f)},m(t,i){C(t,s,i),_(s,l),_(l,o),_(s,r),_(s,n);for(let a=0;a<e.length;a+=1)e[a].m(n,null)},p(t,[i]){if(i&1){c=t[0];let a;for(a=0;a<c.length;a+=1){const u=b(t,c,a);e[a]?e[a].p(u,i):(e[a]=k(u),e[a].c(),e[a].m(n,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=c.length}},i:E,o:E,d(t){t&&f(s),T(e,t)}}}function O(h,s,l){let o;w(h,M,n=>l(1,o=n));let r=[];return A(()=>{o.emit("get-users",n=>{l(0,r=n)}),o.on("user-connected",n=>{l(0,r=[...r,n])}),o.on("user-disconnected",n=>{const c=r.findIndex(e=>e===n);c!==-1&&(r.splice(c,1),l(0,r))})}),[r]}class z extends U{constructor(s){super(),q(this,s,O,N,L,{})}}export{z as default};
