import{S as G,i as P,s as U,k as v,l as y,m as b,h as u,n as w,b as p,C as T,o as V,v as H,q as D,a as C,x as O,r as S,c as q,y as Q,E as k,z,F as N,G as F,f as B,t as L,A as M,H as R,u as W}from"../../../../chunks/index-5fac9acd.js";import{g as j}from"../../../../chunks/navigation-ac3df971.js";import{q as J,v as K,w as X}from"../../../../chunks/index-f3f072ee.js";function Y(s){let e;return{c(){e=v("canvas"),this.h()},l(a){e=y(a,"CANVAS",{width:!0,height:!0}),b(e).forEach(u),this.h()},h(){w(e,"width",s[0]),w(e,"height",s[1])},m(a,n){p(a,e,n),s[4](e)},p(a,[n]){n&1&&w(e,"width",a[0]),n&2&&w(e,"height",a[1])},i:T,o:T,d(a){a&&u(e),s[4](null)}}}function Z(s,e,a){let{qrCodeData:n}=e,{width:i}=e,{height:h}=e,o,c;function m(f){if(!c)return;const d=new Image;d.src=f,d.addEventListener("load",()=>{c.drawImage(d,(i-d.width)/2,(h-d.height)/2)})}V(()=>{c=o.getContext("2d"),c.fillStyle="black",c.fillRect(0,0,o.width,o.height)});function _(f){H[f?"unshift":"push"](()=>{o=f,a(2,o)})}return s.$$set=f=>{"qrCodeData"in f&&a(3,n=f.qrCodeData),"width"in f&&a(0,i=f.width),"height"in f&&a(1,h=f.height)},s.$$.update=()=>{s.$$.dirty&8&&m(n)},[i,h,o,n,_]}class x extends G{constructor(e){super(),P(this,e,Z,Y,U,{qrCodeData:3,width:0,height:1})}}function I(s){let e,a;return{c(){e=v("span"),a=D(s[2]),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=b(e);a=S(i,s[2]),i.forEach(u),this.h()},h(){w(e,"class","error svelte-3ngphy")},m(n,i){p(n,e,i),k(e,a)},p(n,i){i&4&&W(a,n[2])},d(n){n&&u(e)}}}function $(s){let e,a,n,i,h,o,c,m,_,f,d,A,E;i=new x({props:{qrCodeData:s[0],width:300,height:300}});let r=s[2]&&I(s);return{c(){e=v("h3"),a=D("Scan with Google Authenticator"),n=C(),O(i.$$.fragment),h=C(),o=v("input"),c=C(),r&&r.c(),m=C(),_=v("button"),f=D("Verify code"),this.h()},l(t){e=y(t,"H3",{class:!0});var l=b(e);a=S(l,"Scan with Google Authenticator"),l.forEach(u),n=q(t),Q(i.$$.fragment,t),h=q(t),o=y(t,"INPUT",{name:!0,class:!0}),c=q(t),r&&r.l(t),m=q(t),_=y(t,"BUTTON",{type:!0});var g=b(_);f=S(g,"Verify code"),g.forEach(u),this.h()},h(){w(e,"class","svelte-3ngphy"),w(o,"name","code"),w(o,"class","svelte-3ngphy"),w(_,"type","submit")},m(t,l){p(t,e,l),k(e,a),p(t,n,l),z(i,t,l),p(t,h,l),p(t,o,l),N(o,s[1]),p(t,c,l),r&&r.m(t,l),p(t,m,l),p(t,_,l),k(_,f),d=!0,A||(E=[F(o,"input",s[4]),F(_,"click",s[3])],A=!0)},p(t,[l]){const g={};l&1&&(g.qrCodeData=t[0]),i.$set(g),l&2&&o.value!==t[1]&&N(o,t[1]),t[2]?r?r.p(t,l):(r=I(t),r.c(),r.m(m.parentNode,m)):r&&(r.d(1),r=null)},i(t){d||(B(i.$$.fragment,t),d=!0)},o(t){L(i.$$.fragment,t),d=!1},d(t){t&&u(e),t&&u(n),M(i,t),t&&u(h),t&&u(o),t&&u(c),r&&r.d(t),t&&u(m),t&&u(_),A=!1,R(E)}}}function tt(s,e,a){let n="",i="",h="";async function o(){try{await K(i),await X(i),a(2,h=""),j("/")}catch(m){a(2,h=m.message)}}V(async()=>{a(0,n=await J())});function c(){i=this.value,a(1,i)}return[n,i,h,o,c]}class nt extends G{constructor(e){super(),P(this,e,tt,$,U,{})}}export{nt as default};
