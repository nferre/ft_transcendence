import{S as G,i as P,s as U,k as v,l as y,m as q,h as f,p as w,b as p,n as T,o as V,x as B,r as D,a as C,z as H,u as S,c as b,A as O,E as k,B as Q,F as N,G as F,g as z,d as L,C as M,H as R,v as W}from"../chunks/index.85b3f724.js";import{g as j}from"../chunks/navigation.ea62138f.js";import{q as J,v as K,w as X}from"../chunks/index.d8d2a718.js";function Y(s){let e;return{c(){e=v("canvas"),this.h()},l(a){e=y(a,"CANVAS",{width:!0,height:!0}),q(e).forEach(f),this.h()},h(){w(e,"width",s[0]),w(e,"height",s[1])},m(a,n){p(a,e,n),s[4](e)},p(a,[n]){n&1&&w(e,"width",a[0]),n&2&&w(e,"height",a[1])},i:T,o:T,d(a){a&&f(e),s[4](null)}}}function Z(s,e,a){let{qrCodeData:n}=e,{width:i}=e,{height:h}=e,o,c;function m(u){if(!c)return;const d=new Image;d.src=u,d.addEventListener("load",()=>{c.drawImage(d,(i-d.width)/2,(h-d.height)/2)})}V(()=>{c=o.getContext("2d"),c.fillStyle="black",c.fillRect(0,0,o.width,o.height)});function _(u){B[u?"unshift":"push"](()=>{o=u,a(2,o)})}return s.$$set=u=>{"qrCodeData"in u&&a(3,n=u.qrCodeData),"width"in u&&a(0,i=u.width),"height"in u&&a(1,h=u.height)},s.$$.update=()=>{s.$$.dirty&8&&m(n)},[i,h,o,n,_]}class x extends G{constructor(e){super(),P(this,e,Z,Y,U,{qrCodeData:3,width:0,height:1})}}function I(s){let e,a;return{c(){e=v("span"),a=D(s[2]),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=q(e);a=S(i,s[2]),i.forEach(f),this.h()},h(){w(e,"class","error svelte-3ngphy")},m(n,i){p(n,e,i),k(e,a)},p(n,i){i&4&&W(a,n[2])},d(n){n&&f(e)}}}function $(s){let e,a,n,i,h,o,c,m,_,u,d,A,E;i=new x({props:{qrCodeData:s[0],width:300,height:300}});let r=s[2]&&I(s);return{c(){e=v("h3"),a=D("Scan with Google Authenticator"),n=C(),H(i.$$.fragment),h=C(),o=v("input"),c=C(),r&&r.c(),m=C(),_=v("button"),u=D("Verify code"),this.h()},l(t){e=y(t,"H3",{class:!0});var l=q(e);a=S(l,"Scan with Google Authenticator"),l.forEach(f),n=b(t),O(i.$$.fragment,t),h=b(t),o=y(t,"INPUT",{name:!0,class:!0}),c=b(t),r&&r.l(t),m=b(t),_=y(t,"BUTTON",{type:!0});var g=q(_);u=S(g,"Verify code"),g.forEach(f),this.h()},h(){w(e,"class","svelte-3ngphy"),w(o,"name","code"),w(o,"class","svelte-3ngphy"),w(_,"type","submit")},m(t,l){p(t,e,l),k(e,a),p(t,n,l),Q(i,t,l),p(t,h,l),p(t,o,l),N(o,s[1]),p(t,c,l),r&&r.m(t,l),p(t,m,l),p(t,_,l),k(_,u),d=!0,A||(E=[F(o,"input",s[4]),F(_,"click",s[3])],A=!0)},p(t,[l]){const g={};l&1&&(g.qrCodeData=t[0]),i.$set(g),l&2&&o.value!==t[1]&&N(o,t[1]),t[2]?r?r.p(t,l):(r=I(t),r.c(),r.m(m.parentNode,m)):r&&(r.d(1),r=null)},i(t){d||(z(i.$$.fragment,t),d=!0)},o(t){L(i.$$.fragment,t),d=!1},d(t){t&&f(e),t&&f(n),M(i,t),t&&f(h),t&&f(o),t&&f(c),r&&r.d(t),t&&f(m),t&&f(_),A=!1,R(E)}}}function tt(s,e,a){let n="",i="",h="";async function o(){try{await K(i),await X(i),a(2,h=""),j("/")}catch(m){a(2,h=m.message)}}V(async()=>{a(0,n=await J())});function c(){i=this.value,a(1,i)}return[n,i,h,o,c]}class nt extends G{constructor(e){super(),P(this,e,tt,$,U,{})}}export{nt as default};
