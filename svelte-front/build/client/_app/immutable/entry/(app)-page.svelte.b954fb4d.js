import{S as Se,i as Te,s as Oe,k as d,r as F,a as C,l as _,m as h,u as L,h as o,c as G,p as v,D as J,q as ie,b as V,E as l,G as H,n as Z,T as we,I as qe,o as Ce,V as Ge,R as Ee,v as Pe,e as ke,W as Be,g as te,d as re,f as De,H as Ue,z as Ae,A as Fe,B as Le,C as Ve,w as He}from"../chunks/index.85b3f724.js";import{f as Me}from"../chunks/friends.b57e3a7f.js";import{s as ze}from"../chunks/sendGameRequest.3987f4d2.js";import{m as Qe}from"../chunks/matchmaking-socket.258fe63f.js";function ye(a,e,t){const s=a.slice();return s[7]=e[t],s}function ge(a){let e;return{c(){e=d("iconify-icon"),this.h()},l(t){e=_(t,"ICONIFY-ICON",{icon:!0,style:!0,class:!0}),h(e).forEach(o),this.h()},h(){J(e,"icon","mdi:sword-fight"),ie(e,"font-size","2rem"),J(e,"class","svelte-1v9qcpl")},m(t,s){V(t,e,s)},d(t){t&&o(e)}}}function Ie(a){let e,t,s,r,n,i,E=a[7].profile.username+"",g,P,c,N,T,B,k,b,p,m=a[7].isInGame&&ge();function f(){return a[4](a[7])}return{c(){e=d("li"),t=d("div"),s=d("img"),n=C(),i=d("span"),g=F(E),P=C(),c=d("div"),m&&m.c(),N=C(),T=d("button"),B=d("iconify-icon"),k=C(),this.h()},l(y){e=_(y,"LI",{class:!0});var O=h(e);t=_(O,"DIV",{class:!0});var U=h(t);s=_(U,"IMG",{src:!0,alt:!0,class:!0}),n=G(U),i=_(U,"SPAN",{class:!0});var q=h(i);g=L(q,E),q.forEach(o),U.forEach(o),P=G(O),c=_(O,"DIV",{class:!0});var D=h(c);m&&m.l(D),N=G(D),T=_(D,"BUTTON",{class:!0});var w=h(T);B=_(w,"ICONIFY-ICON",{icon:!0,style:!0,class:!0}),h(B).forEach(o),w.forEach(o),D.forEach(o),k=G(O),O.forEach(o),this.h()},h(){Ee(s.src,r=a[7].profile.avatar.url)||v(s,"src",r),v(s,"alt","avatar"),v(s,"class","svelte-1v9qcpl"),v(i,"class","safe-words"),v(t,"class","svelte-1v9qcpl"),J(B,"icon","material-symbols:auto-read-play-outline-sharp"),ie(B,"font-size","1.5rem"),J(B,"class","svelte-1v9qcpl"),v(T,"class","svelte-1v9qcpl"),v(c,"class","svelte-1v9qcpl"),v(e,"class","svelte-1v9qcpl")},m(y,O){V(y,e,O),l(e,t),l(t,s),l(t,n),l(t,i),l(i,g),l(e,P),l(e,c),m&&m.m(c,null),l(c,N),l(c,T),l(T,B),l(e,k),b||(p=H(T,"click",f),b=!0)},p(y,O){a=y,O&2&&!Ee(s.src,r=a[7].profile.avatar.url)&&v(s,"src",r),O&2&&E!==(E=a[7].profile.username+"")&&Pe(g,E),a[7].isInGame?m||(m=ge(),m.c(),m.m(c,N)):m&&(m.d(1),m=null)},d(y){y&&o(e),m&&m.d(),b=!1,p()}}}function Re(a){let e,t,s,r,n,i,E,g,P,c,N,T,B,k=a[1],b=[];for(let p=0;p<k.length;p+=1)b[p]=Ie(ye(a,k,p));return{c(){e=d("dialog"),t=d("article"),s=d("header"),r=d("h3"),n=F("Send game invitation"),i=C(),E=d("button"),g=d("iconify-icon"),P=C(),c=d("body"),N=d("ul");for(let p=0;p<b.length;p+=1)b[p].c();this.h()},l(p){e=_(p,"DIALOG",{class:!0});var m=h(e);t=_(m,"ARTICLE",{id:!0,class:!0});var f=h(t);s=_(f,"HEADER",{class:!0});var y=h(s);r=_(y,"H3",{class:!0});var O=h(r);n=L(O,"Send game invitation"),O.forEach(o),i=G(y),E=_(y,"BUTTON",{class:!0});var U=h(E);g=_(U,"ICONIFY-ICON",{icon:!0,style:!0,class:!0}),h(g).forEach(o),U.forEach(o),y.forEach(o),P=G(f),c=_(f,"BODY",{});var q=h(c);N=_(q,"UL",{class:!0});var D=h(N);for(let w=0;w<b.length;w+=1)b[w].l(D);D.forEach(o),q.forEach(o),f.forEach(o),m.forEach(o),this.h()},h(){v(r,"class","svelte-1v9qcpl"),J(g,"icon","charm:cross"),ie(g,"font-size","1.7rem"),J(g,"class","svelte-1v9qcpl"),v(E,"class","close-button contrast outline svelte-1v9qcpl"),v(s,"class","svelte-1v9qcpl"),v(N,"class","svelte-1v9qcpl"),v(t,"id","play-vs-friend-modal"),v(t,"class","svelte-1v9qcpl"),e.open=!0,v(e,"class","svelte-1v9qcpl")},m(p,m){V(p,e,m),l(e,t),l(t,s),l(s,r),l(r,n),l(s,i),l(s,E),l(E,g),l(t,P),l(t,c),l(c,N);for(let f=0;f<b.length;f+=1)b[f].m(N,null);T||(B=H(E,"click",a[3]),T=!0)},p(p,[m]){if(m&2){k=p[1];let f;for(f=0;f<k.length;f+=1){const y=ye(p,k,f);b[f]?b[f].p(y,m):(b[f]=Ie(y),b[f].c(),b[f].m(N,null))}for(;f<b.length;f+=1)b[f].d(1);b.length=k.length}},i:Z,o:Z,d(p){p&&o(e),we(b,p),T=!1,B()}}}function Ye(a,e,t){let s;qe(a,Me,c=>t(2,s=c));let{setShow:r}=e,n=[];function i(c){t(1,n=c.filter(N=>N.isConnected===!0))}function E(c){c.target.closest("#play-vs-friend-modal")||r(!1)}Ce(async()=>{document.addEventListener("click",E)}),Ge(()=>{document.removeEventListener("click",E)});const g=()=>r(!1),P=c=>ze(c.profile.username);return a.$$set=c=>{"setShow"in c&&t(0,r=c.setShow)},a.$$.update=()=>{a.$$.dirty&4&&i(s)},[r,n,s,g,P]}class je extends Se{constructor(e){super(),Te(this,e,Ye,Re,Oe,{setShow:0})}}function We(a){let e,t,s,r;return{c(){e=d("button"),t=F("Leave"),this.h()},l(n){e=_(n,"BUTTON",{class:!0});var i=h(e);t=L(i,"Leave"),i.forEach(o),this.h()},h(){v(e,"class","outline")},m(n,i){V(n,e,i),l(e,t),s||(r=H(e,"click",a[5]),s=!0)},p:Z,d(n){n&&o(e),s=!1,r()}}}function Je(a){let e,t,s,r;return{c(){e=d("button"),t=F("Play")},l(n){e=_(n,"BUTTON",{});var i=h(e);t=L(i,"Play"),i.forEach(o)},m(n,i){V(n,e,i),l(e,t),s||(r=H(e,"click",a[4]),s=!0)},p:Z,d(n){n&&o(e),s=!1,r()}}}function Ne(a){let e,t;return e=new je({props:{setShow:a[3]}}),{c(){Ae(e.$$.fragment)},l(s){Fe(e.$$.fragment,s)},m(s,r){Le(e,s,r),t=!0},p:Z,i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){re(e.$$.fragment,s),t=!1},d(s){Ve(e,s)}}}function Ke(a){let e,t,s,r,n,i,E,g,P,c,N,T,B,k,b,p,m,f,y,O,U,q,D,w,K,se,z,le,ae,X,oe,Q,ne,$,R,M,ce,ue;function fe(u,S){return u[1]?We:Je}let x=fe(a),A=x(a),I=a[2]&&Ne(a);return{c(){e=d("section"),t=d("h3"),s=F("Game mode"),r=C(),n=d("div"),i=d("button"),E=F("ðŸ§¢ Classic"),P=C(),c=d("button"),N=F("âš¡ Speed"),B=C(),k=d("button"),b=F("ðŸ‘» Ghost"),m=C(),f=d("section"),y=d("h3"),O=F("Find game"),U=C(),q=d("div"),A.c(),D=C(),w=d("div"),K=d("span"),se=C(),z=d("span"),le=F("or"),ae=C(),X=d("span"),oe=C(),Q=d("button"),ne=F("Play vs friends"),$=C(),I&&I.c(),R=ke(),this.h()},l(u){e=_(u,"SECTION",{});var S=h(e);t=_(S,"H3",{class:!0});var de=h(t);s=L(de,"Game mode"),de.forEach(o),r=G(S),n=_(S,"DIV",{class:!0});var Y=h(n);i=_(Y,"BUTTON",{class:!0});var _e=h(i);E=L(_e,"ðŸ§¢ Classic"),_e.forEach(o),P=G(Y),c=_(Y,"BUTTON",{class:!0});var he=h(c);N=L(he,"âš¡ Speed"),he.forEach(o),B=G(Y),k=_(Y,"BUTTON",{class:!0});var ve=h(k);b=L(ve,"ðŸ‘» Ghost"),ve.forEach(o),Y.forEach(o),S.forEach(o),m=G(u),f=_(u,"SECTION",{});var ee=h(f);y=_(ee,"H3",{class:!0});var me=h(y);O=L(me,"Find game"),me.forEach(o),U=G(ee),q=_(ee,"DIV",{class:!0});var j=h(q);A.l(j),D=G(j),w=_(j,"DIV",{class:!0});var W=h(w);K=_(W,"SPAN",{class:!0}),h(K).forEach(o),se=G(W),z=_(W,"SPAN",{class:!0});var pe=h(z);le=L(pe,"or"),pe.forEach(o),ae=G(W),X=_(W,"SPAN",{class:!0}),h(X).forEach(o),W.forEach(o),oe=G(j),Q=_(j,"BUTTON",{});var be=h(Q);ne=L(be,"Play vs friends"),be.forEach(o),j.forEach(o),ee.forEach(o),$=G(u),I&&I.l(u),R=ke(),this.h()},h(){v(t,"class","svelte-rub8w2"),v(i,"class",g=a[0]===0?"":"outline"),v(c,"class",T=a[0]===1?"":"outline"),v(k,"class",p=a[0]===2?"":"outline"),v(n,"class","game-mode svelte-rub8w2"),v(y,"class","svelte-rub8w2"),v(K,"class","svelte-rub8w2"),v(z,"class","svelte-rub8w2"),v(X,"class","svelte-rub8w2"),v(w,"class","or svelte-rub8w2"),v(q,"class","find-game")},m(u,S){V(u,e,S),l(e,t),l(t,s),l(e,r),l(e,n),l(n,i),l(i,E),l(n,P),l(n,c),l(c,N),l(n,B),l(n,k),l(k,b),V(u,m,S),V(u,f,S),l(f,y),l(y,O),l(f,U),l(f,q),A.m(q,null),l(q,D),l(q,w),l(w,K),l(w,se),l(w,z),l(z,le),l(w,ae),l(w,X),l(q,oe),l(q,Q),l(Q,ne),V(u,$,S),I&&I.m(u,S),V(u,R,S),M=!0,ce||(ue=[H(i,"click",a[6]),H(c,"click",a[7]),H(k,"click",a[8]),H(Q,"click",Be(a[9]))],ce=!0)},p(u,[S]){(!M||S&1&&g!==(g=u[0]===0?"":"outline"))&&v(i,"class",g),(!M||S&1&&T!==(T=u[0]===1?"":"outline"))&&v(c,"class",T),(!M||S&1&&p!==(p=u[0]===2?"":"outline"))&&v(k,"class",p),x===(x=fe(u))&&A?A.p(u,S):(A.d(1),A=x(u),A&&(A.c(),A.m(q,D))),u[2]?I?(I.p(u,S),S&4&&te(I,1)):(I=Ne(u),I.c(),te(I,1),I.m(R.parentNode,R)):I&&(He(),re(I,1,1,()=>{I=null}),De())},i(u){M||(te(I),M=!0)},o(u){re(I),M=!1},d(u){u&&o(e),u&&o(m),u&&o(f),A.d(),u&&o($),I&&I.d(u),u&&o(R),ce=!1,Ue(ue)}}}function Xe(a,e,t){let s;qe(a,Qe,k=>t(10,s=k));let r=0,n=!1,i=!1;const E=k=>t(2,i=k);function g(){s.emit("joinQueue",r),t(1,n=!n)}function P(){s.emit("leaveQueue",r),t(1,n=!n)}return[r,n,i,E,g,P,()=>t(0,r=0),()=>t(0,r=1),()=>t(0,r=2),()=>E(!0)]}class tt extends Se{constructor(e){super(),Te(this,e,Xe,Ke,Oe,{})}}export{tt as default};
