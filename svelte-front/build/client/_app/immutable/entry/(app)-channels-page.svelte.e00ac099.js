import{S as _e,i as me,s as pe,k as h,r as B,a as U,l as _,m,u as R,h as i,c as Y,p as D,q as he,b as J,E as o,g as q,f as Z,d as X,T as ne,I as oe,o as ve,D as j,v as G,e as re,w as $,z as be,A as Ee,B as Ie,C as ge,G as x,n as ee}from"../chunks/index.85b3f724.js";import{g as ke}from"../chunks/navigation.ea62138f.js";import{u as ye}from"../chunks/user.718f5da3.js";import{c as Ce}from"../chunks/chat-socket.daf3aa34.js";import{M as Ne}from"../chunks/ModalPasswordChannels.effa4d98.js";function ae(r,e,t){const l=r.slice();return l[12]=e[t],l}function ie(r,e,t){const l=r.slice();return l[12]=e[t],l}function Oe(r){let e,t,l,s;function a(){return r[6](r[12])}return{c(){e=h("button"),t=h("iconify-icon"),this.h()},l(c){e=_(c,"BUTTON",{class:!0});var u=m(e);t=_(u,"ICONIFY-ICON",{icon:!0,class:!0}),m(t).forEach(i),u.forEach(i),this.h()},h(){j(t,"icon","material-symbols:open-in-browser"),j(t,"class","svelte-1d4p513"),D(e,"class","secondary svelte-1d4p513")},m(c,u){J(c,e,u),o(e,t),l||(s=x(e,"click",a),l=!0)},p(c,u){r=c},d(c){c&&i(e),l=!1,s()}}}function we(r){let e,t;return{c(){e=h("p"),t=B("room filled")},l(l){e=_(l,"P",{});var s=m(e);t=R(s,"room filled"),s.forEach(i)},m(l,s){J(l,e,s),o(e,t)},p:ee,d(l){l&&i(e)}}}function ce(r){let e,t,l,s,a=r[12].member.length+r[12].admins.length+1+"",c,u,C=r[12].capacity+"",P,A,N,F,w,M=r[12].name+"",d,S,L,g,T=r[12].ownerProfile.username+"",p,z,n,I;function f(y,b){return y[12].member.length+y[12].admins.length+1>=y[12].capacity?we:Oe}let O=f(r),V=O(r);return{c(){e=h("li"),t=h("div"),l=h("div"),s=h("span"),c=B(a),u=B(" / "),P=B(C),A=U(),N=h("iconify-icon"),F=U(),w=h("div"),d=B(M),S=U(),L=h("small"),g=h("i"),p=B(T),z=U(),n=h("div"),V.c(),I=U(),this.h()},l(y){e=_(y,"LI",{class:!0});var b=m(e);t=_(b,"DIV",{class:!0});var k=m(t);l=_(k,"DIV",{class:!0});var v=m(l);s=_(v,"SPAN",{});var E=m(s);c=R(E,a),u=R(E," / "),P=R(E,C),E.forEach(i),A=Y(v),N=_(v,"ICONIFY-ICON",{icon:!0,class:!0}),m(N).forEach(i),v.forEach(i),F=Y(k),w=_(k,"DIV",{class:!0});var H=m(w);d=R(H,M),S=Y(H),L=_(H,"SMALL",{});var K=m(L);g=_(K,"I",{});var Q=m(g);p=R(Q,T),Q.forEach(i),K.forEach(i),H.forEach(i),k.forEach(i),z=Y(b),n=_(b,"DIV",{class:!0});var W=m(n);V.l(W),W.forEach(i),I=Y(b),b.forEach(i),this.h()},h(){j(N,"icon","fa-solid:user-friends"),j(N,"class","svelte-1d4p513"),D(l,"class","users svelte-1d4p513"),D(w,"class","channel-name svelte-1d4p513"),D(t,"class","channel-left svelte-1d4p513"),D(n,"class","channel-right svelte-1d4p513"),D(e,"class","svelte-1d4p513")},m(y,b){J(y,e,b),o(e,t),o(t,l),o(l,s),o(s,c),o(s,u),o(s,P),o(l,A),o(l,N),o(t,F),o(t,w),o(w,d),o(w,S),o(w,L),o(L,g),o(g,p),o(e,z),o(e,n),V.m(n,null),o(e,I)},p(y,b){b&2&&a!==(a=y[12].member.length+y[12].admins.length+1+"")&&G(c,a),b&2&&C!==(C=y[12].capacity+"")&&G(P,C),b&2&&M!==(M=y[12].name+"")&&G(d,M),b&2&&T!==(T=y[12].ownerProfile.username+"")&&G(p,T),O===(O=f(y))&&V?V.p(y,b):(V.d(1),V=O(y),V&&(V.c(),V.m(n,null)))},d(y){y&&i(e),V.d()}}}function fe(r){let e,t,l,s,a=r[12].member.length+r[12].admins.length+1+"",c,u,C=r[12].capacity+"",P,A,N,F,w,M=r[12].name+"",d,S,L,g,T=r[12].ownerProfile.username+"",p,z,n,I,f,O;function V(v,E){return v[12].member.length+v[12].admins.length+1>=v[12].capacity?Te:v[12].isProtected?Pe:Se}let y=V(r),b=y(r),k=r[2]&&ue(r);return{c(){e=h("li"),t=h("div"),l=h("div"),s=h("span"),c=B(a),u=B(" / "),P=B(C),A=U(),N=h("iconify-icon"),F=U(),w=h("div"),d=B(M),S=U(),L=h("small"),g=h("i"),p=B(T),z=U(),n=h("div"),b.c(),I=U(),k&&k.c(),f=U(),this.h()},l(v){e=_(v,"LI",{class:!0});var E=m(e);t=_(E,"DIV",{class:!0});var H=m(t);l=_(H,"DIV",{class:!0});var K=m(l);s=_(K,"SPAN",{});var Q=m(s);c=R(Q,a),u=R(Q," / "),P=R(Q,C),Q.forEach(i),A=Y(K),N=_(K,"ICONIFY-ICON",{icon:!0,class:!0}),m(N).forEach(i),K.forEach(i),F=Y(H),w=_(H,"DIV",{class:!0});var W=m(w);d=R(W,M),S=Y(W),L=_(W,"SMALL",{});var le=m(L);g=_(le,"I",{});var te=m(g);p=R(te,T),te.forEach(i),le.forEach(i),W.forEach(i),H.forEach(i),z=Y(E),n=_(E,"DIV",{class:!0});var se=m(n);b.l(se),se.forEach(i),I=Y(E),k&&k.l(E),f=Y(E),E.forEach(i),this.h()},h(){j(N,"icon","fa-solid:user-friends"),j(N,"class","svelte-1d4p513"),D(l,"class","users svelte-1d4p513"),D(w,"class","channel-name svelte-1d4p513"),D(t,"class","channel-left svelte-1d4p513"),D(n,"class","channel-right svelte-1d4p513"),D(e,"class","svelte-1d4p513")},m(v,E){J(v,e,E),o(e,t),o(t,l),o(l,s),o(s,c),o(s,u),o(s,P),o(l,A),o(l,N),o(t,F),o(t,w),o(w,d),o(w,S),o(w,L),o(L,g),o(g,p),o(e,z),o(e,n),b.m(n,null),o(e,I),k&&k.m(e,null),o(e,f),O=!0},p(v,E){(!O||E&1)&&a!==(a=v[12].member.length+v[12].admins.length+1+"")&&G(c,a),(!O||E&1)&&C!==(C=v[12].capacity+"")&&G(P,C),(!O||E&1)&&M!==(M=v[12].name+"")&&G(d,M),(!O||E&1)&&T!==(T=v[12].ownerProfile.username+"")&&G(p,T),y===(y=V(v))&&b?b.p(v,E):(b.d(1),b=y(v),b&&(b.c(),b.m(n,null))),v[2]?k?(k.p(v,E),E&4&&q(k,1)):(k=ue(v),k.c(),q(k,1),k.m(e,f)):k&&($(),X(k,1,1,()=>{k=null}),Z())},i(v){O||(q(k),O=!0)},o(v){X(k),O=!1},d(v){v&&i(e),b.d(),k&&k.d()}}}function Se(r){let e,t,l,s;function a(){return r[8](r[12])}return{c(){e=h("button"),t=h("iconify-icon"),this.h()},l(c){e=_(c,"BUTTON",{class:!0});var u=m(e);t=_(u,"ICONIFY-ICON",{icon:!0,class:!0}),m(t).forEach(i),u.forEach(i),this.h()},h(){j(t,"icon","material-symbols:open-in-browser"),j(t,"class","svelte-1d4p513"),D(e,"class","secondary svelte-1d4p513")},m(c,u){J(c,e,u),o(e,t),l||(s=x(e,"click",a),l=!0)},p(c,u){r=c},d(c){c&&i(e),l=!1,s()}}}function Pe(r){let e,t,l,s,a,c;return{c(){e=h("iconify-icon"),t=U(),l=h("button"),s=h("iconify-icon"),this.h()},l(u){e=_(u,"ICONIFY-ICON",{icon:!0,style:!0,class:!0}),m(e).forEach(i),t=Y(u),l=_(u,"BUTTON",{class:!0});var C=m(l);s=_(C,"ICONIFY-ICON",{icon:!0,class:!0}),m(s).forEach(i),C.forEach(i),this.h()},h(){j(e,"icon","material-symbols:lock"),he(e,"font-size","1.5rem"),j(e,"class","svelte-1d4p513"),j(s,"icon","material-symbols:open-in-browser"),j(s,"class","svelte-1d4p513"),D(l,"class","secondary svelte-1d4p513")},m(u,C){J(u,e,C),J(u,t,C),J(u,l,C),o(l,s),a||(c=x(l,"click",r[7]),a=!0)},p:ee,d(u){u&&i(e),u&&i(t),u&&i(l),a=!1,c()}}}function Te(r){let e,t;return{c(){e=h("p"),t=B("room filled")},l(l){e=_(l,"P",{});var s=m(e);t=R(s,"room filled"),s.forEach(i)},m(l,s){J(l,e,s),o(e,t)},p:ee,d(l){l&&i(e)}}}function ue(r){let e,t;return e=new Ne({props:{closeModal:r[5],roomId:r[12].id}}),{c(){be(e.$$.fragment)},l(l){Ee(e.$$.fragment,l)},m(l,s){Ie(e,l,s),t=!0},p(l,s){const a={};s&1&&(a.roomId=l[12].id),e.$set(a)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function de(r){let e=!r[3](r[12]),t,l,s=e&&fe(r);return{c(){s&&s.c(),t=re()},l(a){s&&s.l(a),t=re()},m(a,c){s&&s.m(a,c),J(a,t,c),l=!0},p(a,c){c&1&&(e=!a[3](a[12])),e?s?(s.p(a,c),c&1&&q(s,1)):(s=fe(a),s.c(),q(s,1),s.m(t.parentNode,t)):s&&($(),X(s,1,1,()=>{s=null}),Z())},i(a){l||(q(s),l=!0)},o(a){X(s),l=!1},d(a){s&&s.d(a),a&&i(t)}}}function De(r){let e,t,l,s,a,c,u,C,P,A,N,F,w,M,d,S,L=r[1],g=[];for(let n=0;n<L.length;n+=1)g[n]=ce(ie(r,L,n));let T=r[0],p=[];for(let n=0;n<T.length;n+=1)p[n]=de(ae(r,T,n));const z=n=>X(p[n],1,1,()=>{p[n]=null});return{c(){e=h("section"),t=h("a"),l=B("Create your channel"),s=U(),a=h("section"),c=h("h3"),u=B("Joined channels"),C=U(),P=h("ul");for(let n=0;n<g.length;n+=1)g[n].c();A=U(),N=h("section"),F=h("h3"),w=B("Channels"),M=U(),d=h("ul");for(let n=0;n<p.length;n+=1)p[n].c();this.h()},l(n){e=_(n,"SECTION",{});var I=m(e);t=_(I,"A",{href:!0,role:!0,style:!0});var f=m(t);l=R(f,"Create your channel"),f.forEach(i),I.forEach(i),s=Y(n),a=_(n,"SECTION",{});var O=m(a);c=_(O,"H3",{class:!0});var V=m(c);u=R(V,"Joined channels"),V.forEach(i),C=Y(O),P=_(O,"UL",{class:!0});var y=m(P);for(let E=0;E<g.length;E+=1)g[E].l(y);y.forEach(i),O.forEach(i),A=Y(n),N=_(n,"SECTION",{});var b=m(N);F=_(b,"H3",{class:!0});var k=m(F);w=R(k,"Channels"),k.forEach(i),M=Y(b),d=_(b,"UL",{class:!0});var v=m(d);for(let E=0;E<p.length;E+=1)p[E].l(v);v.forEach(i),b.forEach(i),this.h()},h(){D(t,"href","/channels/create"),D(t,"role","button"),he(t,"width","100%"),D(c,"class","svelte-1d4p513"),D(P,"class","svelte-1d4p513"),D(F,"class","svelte-1d4p513"),D(d,"class","svelte-1d4p513")},m(n,I){J(n,e,I),o(e,t),o(t,l),J(n,s,I),J(n,a,I),o(a,c),o(c,u),o(a,C),o(a,P);for(let f=0;f<g.length;f+=1)g[f].m(P,null);J(n,A,I),J(n,N,I),o(N,F),o(F,w),o(N,M),o(N,d);for(let f=0;f<p.length;f+=1)p[f].m(d,null);S=!0},p(n,[I]){if(I&18){L=n[1];let f;for(f=0;f<L.length;f+=1){const O=ie(n,L,f);g[f]?g[f].p(O,I):(g[f]=ce(O),g[f].c(),g[f].m(P,null))}for(;f<g.length;f+=1)g[f].d(1);g.length=L.length}if(I&61){T=n[0];let f;for(f=0;f<T.length;f+=1){const O=ae(n,T,f);p[f]?(p[f].p(O,I),q(p[f],1)):(p[f]=de(O),p[f].c(),q(p[f],1),p[f].m(d,null))}for($(),f=T.length;f<p.length;f+=1)z(f);Z()}},i(n){if(!S){for(let I=0;I<T.length;I+=1)q(p[I]);S=!0}},o(n){p=p.filter(Boolean);for(let I=0;I<p.length;I+=1)X(p[I]);S=!1},d(n){n&&i(e),n&&i(s),n&&i(a),ne(g,n),n&&i(A),n&&i(N),ne(p,n)}}}function Le(r,e,t){let l,s;oe(r,Ce,d=>t(9,l=d)),oe(r,ye,d=>t(10,s=d));let a=[],c=[],u=!1;function C(d){return d.filter(S=>s.id===S.owner||S.admins.indexOf(s.id)!==-1||S.member.indexOf(s.id)!==-1)}function P(d){for(let S=0;S<c.length;S++)if(c[S].id===d.id)return!0;return!1}function A(d){l.emit("joinRoom",d,void 0,S=>{S&&ke("/channels/"+d)})}function N(){t(2,u=!1)}ve(()=>{l.emit("getRooms",d=>{t(0,a=d)}),l.on("roomUpdate",d=>{t(0,a=d)})});const F=d=>{A(d.id)},w=()=>{t(2,u=!0)},M=d=>{A(d.id)};return r.$$.update=()=>{r.$$.dirty&1&&t(1,c=C(a))},[a,c,u,P,A,N,F,w,M]}class Ye extends _e{constructor(e){super(),me(this,e,Le,De,pe,{})}}export{Ye as default};
